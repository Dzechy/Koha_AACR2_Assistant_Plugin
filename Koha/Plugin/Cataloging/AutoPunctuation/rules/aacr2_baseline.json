{
  "version": "1.4.0",
  "standard": "AACR2",
  "description": "Baseline AACR2/ISBD punctuation rules for MARC21 bibliographic records. Deterministic rules only; AI is assistive.",
  "rules": [
    {
      "id": "AACR2_CTRL_FIXED_001",
      "tag_pattern": "^00[0-9]$",
      "severity": "INFO",
      "rationale": "Control fields are fixed-length or system-managed; AACR2 punctuation does not apply.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Control field; no AACR2 punctuation applied."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "001 123456",
          "after": "001 123456"
        }
      ]
    },
    {
      "id": "AACR2_SPACING_ALL_001",
      "tag_pattern": "^[1-8][0-9][0-9]$",
      "subfield_pattern": "^[a-z0-9]$",
      "severity": "INFO",
      "rationale": "AACR2 discourages double spacing within subfield values.",
      "checks": [
        {
          "type": "spacing",
          "severity": "INFO",
          "message": "Reduce double spaces in AACR2 text."
        }
      ],
      "fixes": [
        {
          "label": "Normalize spacing",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "New  York",
          "after": "New York"
        }
      ]
    },
    {
      "id": "AACR2_STDNUM_NO_PUNCT_001",
      "tag_pattern": "^(010|015|016|020|022|024|028|030|035|036|037|038|039)$",
      "subfield_pattern": "^[a-z0-9]$",
      "severity": "INFO",
      "rationale": "Standard numbers and control data do not carry terminal punctuation.",
      "checks": [
        {
          "type": "no_terminal_punctuation",
          "severity": "INFO",
          "message": "Remove trailing punctuation from standard numbers."
        }
      ],
      "fixes": [
        {
          "label": "Remove trailing punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "9781234567890.",
          "after": "9781234567890"
        }
      ]
    },
    {
      "id": "AACR2_CLASS_NO_PUNCT_001",
      "tag_pattern": "^(050|060|082|090|092)$",
      "subfields": [
        "a",
        "b"
      ],
      "severity": "INFO",
      "rationale": "Classification and call numbers should not include terminal punctuation.",
      "checks": [
        {
          "type": "no_terminal_punctuation",
          "severity": "INFO",
          "message": "Remove trailing punctuation from call numbers."
        }
      ],
      "fixes": [
        {
          "label": "Remove trailing punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "PS3511.I9 G7.",
          "after": "PS3511.I9 G7"
        }
      ]
    },
    {
      "id": "AACR2_LANG_041_HANDSOFF_001",
      "tag": "041",
      "subfield_pattern": "^[a-z0-9]$",
      "severity": "INFO",
      "rationale": "Language code fields are coded data and should not receive punctuation normalization.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Language code field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "eng",
          "after": "eng"
        }
      ]
    },
    {
      "id": "AACR2_PERSONAL_NAME_A_001",
      "tag_pattern": "^(100|700|800)$",
      "subfields": [
        "a"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Fitzgerald, F. Scott",
          "after": "Fitzgerald, F. Scott"
        }
      ]
    },
    {
      "id": "AACR2_PERSONAL_NAME_D_001",
      "tag_pattern": "^(100|700|800)$",
      "subfields": [
        "b",
        "c",
        "d",
        "e"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "1900-1940",
          "after": "1900-1940"
        }
      ]
    },
    {
      "id": "AACR2_PERSONAL_NAME_Q_001",
      "tag_pattern": "^(100|700|800)$",
      "subfields": [
        "q"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Francis Scott",
          "after": "Francis Scott"
        }
      ]
    },
    {
      "id": "AACR2_CORP_NAME_A_001",
      "tag_pattern": "^(110|710|810)$",
      "subfields": [
        "a"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "International Council of Museums",
          "after": "International Council of Museums"
        }
      ]
    },
    {
      "id": "AACR2_CORP_NAME_B_001",
      "tag_pattern": "^(110|710|810)$",
      "subfields": [
        "b",
        "e"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Library",
          "after": "Library"
        }
      ]
    },
    {
      "id": "AACR2_MEETING_NAME_A_001",
      "tag_pattern": "^(111|711|811)$",
      "subfields": [
        "a"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Symposium on Cataloging",
          "after": "Symposium on Cataloging"
        }
      ]
    },
    {
      "id": "AACR2_MEETING_NAME_CD_001",
      "tag_pattern": "^(111|711|811)$",
      "subfields": [
        "c",
        "d",
        "e"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "London, England",
          "after": "London, England"
        }
      ]
    },
    {
      "id": "AACR2_UNIFORM_TITLE_A_001",
      "tag_pattern": "^(130|240|730|830)$",
      "subfields": [
        "a"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Selections",
          "after": "Selections"
        }
      ]
    },
    {
      "id": "AACR2_UNIFORM_TITLE_NP_001",
      "tag_pattern": "^(130|240|730|830)$",
      "subfields": [
        "n",
        "p",
        "l",
        "f"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Book 1",
          "after": "Book 1"
        }
      ]
    },
    {
      "id": "AACR2_TITLE_245A_001",
      "tag": "245",
      "subfields": [
        "a"
      ],
      "severity": "ERROR",
      "rationale": "AACR2 title proper ends with a period when no other title subfields follow, or with space-colon-space when $b follows.",
      "checks": [
        {
          "type": "punctuation",
          "case_mode": "initial_upper",
          "replace_ellipses_with_dash": true,
          "end_not_in": [
            " :",
            ":",
            " /",
            "/",
            " ;",
            ";",
            " ,",
            ",",
            " =",
            "="
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "b",
            "c",
            "n",
            "p"
          ],
          "suffix_if_following_prefixes": [
            {
              "prefix": "=",
              "suffix": " = "
            }
          ],
          "suffix_if_following": " : ",
          "suffix_if_last": ".",
          "end_in": [
            "]",
            ")",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "ERROR",
          "message": "Apply AACR2 terminal punctuation for title proper."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 title punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "The great Gatsby",
          "after": "The great Gatsby."
        }
      ]
    },
    {
      "id": "AACR2_TITLE_245B_001",
      "tag": "245",
      "subfields": [
        "b"
      ],
      "severity": "WARNING",
      "rationale": "AACR2 subtitle follows after a space-colon-space, and if 245$c follows, slash punctuation should be carried at the end of 245$b.",
      "checks": [
        {
          "type": "punctuation",
          "case_mode": "initial_lower",
          "strip_prefixes": [
            ":",
            "="
          ],
          "end_not_in": [
            " :",
            ":",
            " =",
            "=",
            " /",
            "/",
            " ;",
            ";",
            " ,",
            ","
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "c"
          ],
          "suffix_if_following": " / ",
          "suffix_if_last": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "WARNING",
          "message": "Ensure subtitle punctuation is handled at the end of 245$b."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 subtitle punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "a novel",
          "after": "a novel."
        }
      ]
    },
    {
      "id": "AACR2_TITLE_245C_001",
      "tag": "245",
      "subfields": [
        "c"
      ],
      "repeat_policy": "first_only",
      "severity": "WARNING",
      "rationale": "AACR2 statement of responsibility in 245$c should not carry the slash prefix; slash punctuation should be attached to the preceding 245$b when present.",
      "checks": [
        {
          "type": "punctuation",
          "strip_prefixes": [
            "/"
          ],
          "end_not_in": [
            " ;",
            ";",
            " ,",
            ","
          ],
          "suffix": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "WARNING",
          "message": "Do not prefix 245$c with slash; keep terminal punctuation only."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 statement of responsibility punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "/ F. Scott Fitzgerald",
          "after": "F. Scott Fitzgerald."
        }
      ]
    },
    {
      "id": "AACR2_TITLE_245C_002",
      "tag": "245",
      "subfields": [
        "c"
      ],
      "previous_subfield_is": [
        "c"
      ],
      "severity": "INFO",
      "rationale": "Additional statements of responsibility are separated with semicolon-space.",
      "checks": [
        {
          "type": "punctuation",
          "prefix": " ; ",
          "end_not_in": [
            " ;",
            ";",
            " /",
            "/",
            " ,",
            ","
          ],
          "suffix": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "INFO",
          "message": "Use semicolon-space for additional statements of responsibility."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 additional responsibility punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "edited by John Smith",
          "after": " ; edited by John Smith."
        }
      ]
    },
    {
      "id": "AACR2_TITLE_245N_001",
      "tag": "245",
      "subfields": [
        "n"
      ],
      "severity": "INFO",
      "rationale": "AACR2 numbering follows with period-space; comma-space precedes part title.",
      "checks": [
        {
          "type": "punctuation",
          "prefix": ". ",
          "end_not_in": [
            " .",
            ".",
            " ,",
            ","
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "p"
          ],
          "suffix_if_following": ", ",
          "suffix_if_last": "",
          "end_in": [
            ","
          ],
          "normalize_punctuation": true,
          "severity": "INFO",
          "message": "Use period-space before numbering and comma-space before part title."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 numbering punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "Part 1",
          "after": ". Part 1,"
        }
      ]
    },
    {
      "id": "AACR2_TITLE_245P_001",
      "tag": "245",
      "subfields": [
        "p"
      ],
      "previous_subfield_is": [
        "n"
      ],
      "severity": "INFO",
      "rationale": "Part titles follow numbering with comma-space.",
      "checks": [
        {
          "type": "punctuation",
          "prefix": ", ",
          "end_not_in": [
            " ,",
            ",",
            " .",
            ".",
            " ;",
            ";"
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "b",
            "c"
          ],
          "suffix_if_following": "",
          "suffix_if_last": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "INFO",
          "message": "Use comma-space before part title."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 part title punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "The early years",
          "after": ", The early years."
        }
      ]
    },
    {
      "id": "AACR2_TITLE_245P_002",
      "tag": "245",
      "subfields": [
        "p"
      ],
      "only_when_no_other_rule": true,
      "severity": "INFO",
      "rationale": "Part titles without numbering follow with period-space.",
      "checks": [
        {
          "type": "punctuation",
          "prefix": ". ",
          "end_not_in": [
            " .",
            ".",
            " ,",
            ",",
            " ;",
            ";"
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "b",
            "c"
          ],
          "suffix_if_following": "",
          "suffix_if_last": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "INFO",
          "message": "Use period-space before part title."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 part title punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "The early years",
          "after": ". The early years."
        }
      ]
    },
    {
      "id": "AACR2_TITLE_246A_001",
      "tag": "246",
      "subfields": [
        "a"
      ],
      "severity": "INFO",
      "rationale": "Variant titles are usually left as entered unless local policy requires specific punctuation.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Variant title field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Great Gatsby",
          "after": "Great Gatsby"
        }
      ]
    },
    {
      "id": "AACR2_EDITION_250A_001",
      "tag": "250",
      "subfields": [
        "a"
      ],
      "severity": "WARNING",
      "rationale": "AACR2 edition statements end with a period when final.",
      "checks": [
        {
          "type": "punctuation",
          "suffix": ".",
          "severity": "WARNING",
          "message": "Add terminal period to edition statement."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 edition punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "2nd ed",
          "after": "2nd ed."
        }
      ]
    },
    {
      "id": "AACR2_EDITION_250B_001",
      "tag": "250",
      "subfields": [
        "b"
      ],
      "severity": "WARNING",
      "rationale": "Edition remainder is commonly preceded by comma-space and ends with a period.",
      "checks": [
        {
          "type": "punctuation",
          "prefix_mode": "conditional_preceding",
          "when_preceding_subfields": [
            "a"
          ],
          "prefix_if_preceding": ", ",
          "end_not_in": [
            " .",
            ".",
            " ,",
            ","
          ],
          "suffix_mode": "when_last",
          "suffix_if_last": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "WARNING",
          "message": "Use comma-space before 250$b and end final edition statement with a period."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 edition remainder punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "rev. and expanded",
          "after": ", rev. and expanded."
        }
      ]
    },
    {
      "id": "AACR2_MUSICAL_254A_001",
      "tag": "254",
      "subfields": [
        "a"
      ],
      "severity": "INFO",
      "rationale": "Musical presentation statements are usually treated like short notes and typically end with a period.",
      "checks": [
        {
          "type": "punctuation",
          "suffix": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "severity": "INFO",
          "message": "Consider terminal period for musical presentation statement."
        }
      ],
      "fixes": [
        {
          "label": "Apply musical presentation punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "Miniature score",
          "after": "Miniature score."
        }
      ]
    },
    {
      "id": "AACR2_CARTO_255_HANDSOFF_001",
      "tag": "255",
      "subfield_pattern": "^[a-z0-9]$",
      "severity": "INFO",
      "rationale": "Cartographic data is format-specific; avoid automatic internal punctuation changes.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Cartographic field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Scale 1:24,000",
          "after": "Scale 1:24,000"
        }
      ]
    },
    {
      "id": "AACR2_PUBLICATION_260A_001",
      "tag_pattern": "^(260|264)$",
      "subfields": [
        "a"
      ],
      "severity": "ERROR",
      "rationale": "AACR2 publication place is followed by space-colon-space when publisher/date follow.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " :",
            ":",
            " ;",
            ";",
            " ,",
            ","
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "b",
            "c"
          ],
          "suffix_if_following": " : ",
          "suffix_if_last": ".",
          "end_in": [
            ":"
          ],
          "normalize_punctuation": true,
          "severity": "ERROR",
          "message": "Use space-colon-space after place of publication."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 publication place punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "New York",
          "after": "New York :"
        }
      ]
    },
    {
      "id": "AACR2_PUBLICATION_260B_001",
      "tag_pattern": "^(260|264)$",
      "subfields": [
        "b"
      ],
      "severity": "ERROR",
      "rationale": "AACR2 publisher is followed by comma-space when date follows.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " ,",
            ",",
            " ;",
            ";",
            " : ",
            ":"
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "c"
          ],
          "suffix_if_following": ", ",
          "suffix_if_last": ".",
          "end_in": [
            ","
          ],
          "normalize_punctuation": true,
          "severity": "ERROR",
          "message": "Use comma-space after publisher."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 publisher punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "Scribner",
          "after": "Scribner,"
        }
      ]
    },
    {
      "id": "AACR2_PUBLICATION_260C_001",
      "tag_pattern": "^(260|264)$",
      "subfields": [
        "c"
      ],
      "severity": "ERROR",
      "rationale": "AACR2 publication date ends with a period.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " .",
            ".",
            " ;",
            ";",
            " ,",
            ","
          ],
          "suffix": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "ERROR",
          "message": "Add terminal period to publication date."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 date punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "1925",
          "after": "1925."
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_300A_001",
      "tag": "300",
      "subfields": [
        "a"
      ],
      "requires_subfields": [
        "b"
      ],
      "severity": "ERROR",
      "rationale": "AACR2 extent ends with space-colon-space when other physical details follow.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " :",
            ":",
            " ;",
            ";",
            " ,",
            ","
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "b"
          ],
          "suffix_if_following": " : ",
          "suffix_if_last": ".",
          "end_in": [
            ":"
          ],
          "normalize_punctuation": true,
          "severity": "ERROR",
          "message": "End extent with space-colon-space before other details."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 extent punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "xii, 180 p",
          "after": "xii, 180 p :"
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_300A_002",
      "tag": "300",
      "subfields": [
        "a"
      ],
      "requires_subfields": [
        "c"
      ],
      "forbids_subfields": [
        "b"
      ],
      "severity": "ERROR",
      "rationale": "AACR2 extent ends with space-semicolon-space when dimensions follow directly.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " ;",
            ";",
            " :",
            ":",
            " ,",
            ","
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "c"
          ],
          "suffix_if_following": " ; ",
          "suffix_if_last": ".",
          "end_in": [
            ";"
          ],
          "normalize_punctuation": true,
          "severity": "ERROR",
          "message": "End extent with space-semicolon-space before dimensions."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 extent punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "xii, 180 p",
          "after": "xii, 180 p ;"
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_300A_003",
      "tag": "300",
      "subfields": [
        "a"
      ],
      "forbids_subfields": [
        "b",
        "c",
        "e"
      ],
      "severity": "ERROR",
      "rationale": "AACR2 extent ends with a period when no other physical detail follows.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " .",
            ".",
            " ;",
            ";",
            " ,",
            ","
          ],
          "suffix": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "ERROR",
          "message": "End extent with a period."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 extent punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "xii, 180 p",
          "after": "xii, 180 p."
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_300A_004",
      "tag": "300",
      "subfields": [
        "a"
      ],
      "requires_subfields": [
        "e"
      ],
      "forbids_subfields": [
        "b",
        "c"
      ],
      "severity": "ERROR",
      "rationale": "When accompanying material follows extent directly, use plus separator.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " +",
            "+",
            " :",
            ":",
            " ;",
            ";",
            " ,",
            ","
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "e"
          ],
          "suffix_if_following": " + ",
          "suffix_if_last": ".",
          "end_in": [
            "+"
          ],
          "normalize_punctuation": true,
          "severity": "ERROR",
          "message": "End extent with plus before accompanying material."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 extent punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "1 volume",
          "after": "1 volume +"
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_300B_001",
      "tag": "300",
      "subfields": [
        "b"
      ],
      "requires_subfields": [
        "c"
      ],
      "severity": "WARNING",
      "rationale": "AACR2 other physical details are introduced by a colon and use semicolon before dimensions.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " :",
            ":",
            " ;",
            ";",
            " ,",
            ","
          ],
          "prefix_mode": "conditional_preceding",
          "when_preceding_subfields": [
            "a"
          ],
          "prefix_if_preceding": " : ",
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "c"
          ],
          "suffix_if_following": " ; ",
          "suffix_if_last": ".",
          "end_in": [
            ";"
          ],
          "normalize_punctuation": true,
          "severity": "WARNING",
          "message": "Use colon before other physical details and semicolon before dimensions."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 physical detail punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "ill",
          "after": " : ill."
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_300B_002",
      "tag": "300",
      "subfields": [
        "b"
      ],
      "requires_subfields": [
        "e"
      ],
      "forbids_subfields": [
        "c"
      ],
      "severity": "WARNING",
      "rationale": "When accompanying material follows other physical details directly, use plus separator.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " :",
            ":",
            " +",
            "+",
            " ;",
            ";",
            " ,",
            ","
          ],
          "prefix_mode": "conditional_preceding",
          "when_preceding_subfields": [
            "a"
          ],
          "prefix_if_preceding": " : ",
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "e"
          ],
          "suffix_if_following": " + ",
          "suffix_if_last": ".",
          "end_in": [
            "+"
          ],
          "normalize_punctuation": true,
          "severity": "WARNING",
          "message": "Use plus before accompanying material when no dimensions are present."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 physical detail punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "ill.",
          "after": " : ill. +"
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_300B_003",
      "tag": "300",
      "subfields": [
        "b"
      ],
      "forbids_subfields": [
        "c",
        "e"
      ],
      "severity": "WARNING",
      "rationale": "When no further subfields follow, other physical details end with a period.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " :",
            ":",
            " ;",
            ";",
            " ,",
            ","
          ],
          "prefix_mode": "conditional_preceding",
          "when_preceding_subfields": [
            "a"
          ],
          "prefix_if_preceding": " : ",
          "suffix_mode": "when_last",
          "suffix_if_last": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "WARNING",
          "message": "End other physical details with a period when final."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 physical detail punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "ill",
          "after": " : ill."
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_300C_001",
      "tag": "300",
      "subfields": [
        "c"
      ],
      "severity": "WARNING",
      "rationale": "AACR2 dimensions end with a period.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " .",
            ".",
            " +",
            "+",
            " ;",
            ";",
            " ,",
            ","
          ],
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "e"
          ],
          "suffix_if_following": " + ",
          "suffix_if_last": ".",
          "end_in": [
            ".",
            "?",
            "!",
            "+"
          ],
          "normalize_punctuation": true,
          "severity": "WARNING",
          "message": "Use plus before accompanying material; otherwise add terminal period to dimensions."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 dimensions punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "23 cm",
          "after": "23 cm."
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_300E_001",
      "tag": "300",
      "subfields": [
        "e"
      ],
      "severity": "WARNING",
      "rationale": "Accompanying material follows with plus and generally ends with a period when final.",
      "checks": [
        {
          "type": "punctuation",
          "end_not_in": [
            " .",
            ".",
            " ;",
            ";",
            " ,",
            ","
          ],
          "suffix": ".",
          "end_in": [
            ".",
            "?",
            "!"
          ],
          "normalize_punctuation": true,
          "severity": "WARNING",
          "message": "End accompanying material with terminal period when final."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 accompanying material punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "1 booklet",
          "after": "1 booklet."
        }
      ]
    },
    {
      "id": "AACR2_SERIES_490A_001",
      "tag_pattern": "^(440|490)$",
      "subfields": [
        "a"
      ],
      "severity": "WARNING",
      "rationale": "Series statement ends with semicolon when numbering follows.",
      "checks": [
        {
          "type": "punctuation",
          "suffix_mode": "conditional_following",
          "when_following_subfields": [
            "v"
          ],
          "suffix_if_following": " ; ",
          "suffix_if_last": ".",
          "severity": "WARNING",
          "message": "Use semicolon before series numbering."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 series punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "Cambridge studies",
          "after": "Cambridge studies ;"
        }
      ]
    },
    {
      "id": "AACR2_SERIES_490V_001",
      "tag_pattern": "^(440|490)$",
      "subfields": [
        "v"
      ],
      "severity": "WARNING",
      "rationale": "Series numbering ends with a period.",
      "checks": [
        {
          "type": "punctuation",
          "suffix": ".",
          "severity": "WARNING",
          "message": "Add terminal period to series numbering."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 series numbering punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "v. 12",
          "after": "v. 12."
        }
      ]
    },
    {
      "id": "AACR2_SERIES_8XXV_001",
      "tag_pattern": "^(800|810|811|830)$",
      "subfields": [
        "v"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "v. 2",
          "after": "v. 2"
        }
      ]
    },
    {
      "id": "AACR2_NOTES_5XXA_001",
      "tag_pattern": "^5(?!05$|33$|34$)[0-9][0-9]$",
      "subfields": [
        "a"
      ],
      "severity": "WARNING",
      "rationale": "General notes and summary notes end with a period.",
      "checks": [
        {
          "type": "punctuation",
          "suffix": ".",
          "severity": "WARNING",
          "message": "Add terminal period to note."
        }
      ],
      "fixes": [
        {
          "label": "Apply AACR2 note punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "Includes bibliographical references",
          "after": "Includes bibliographical references."
        }
      ]
    },
    {
      "id": "AACR2_NOTES_COMPLEX_HANDSOFF_001",
      "tag_pattern": "^(505|533|534)$",
      "subfield_pattern": "^[a-z0-9]$",
      "severity": "INFO",
      "rationale": "Structured contents and reproduction/original-version notes are complex; avoid automatic punctuation normalization.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Complex note field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "pt. 1. Origins -- pt. 2. Methods",
          "after": "pt. 1. Origins -- pt. 2. Methods"
        }
      ]
    },
    {
      "id": "AACR2_SUBJECT_MAIN_001",
      "tag_pattern": "^6[0-9][0-9]$",
      "subfields": [
        "a"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Women",
          "after": "Women"
        }
      ]
    },
    {
      "id": "AACR2_SUBJECT_SUBDIV_001",
      "tag_pattern": "^6[0-9][0-9]$",
      "subfields": [
        "v",
        "x",
        "y",
        "z"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "History",
          "after": "History"
        }
      ]
    },
    {
      "id": "AACR2_ADDED_TITLE_740A_001",
      "tag": "740",
      "subfields": [
        "a"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Selections",
          "after": "Selections"
        }
      ]
    },
    {
      "id": "AACR2_LINKING_76X_A_001",
      "tag_pattern": "^(76|77|78)[0-9]$",
      "subfields": [
        "a"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Journal of records",
          "after": "Journal of records"
        }
      ]
    },
    {
      "id": "AACR2_LINKING_76X_T_001",
      "tag_pattern": "^(76|77|78)[0-9]$",
      "subfields": [
        "t"
      ],
      "severity": "INFO",
      "rationale": "Heading/access-point fields are not ISBD terminal-punctuation targets; keep user-entered heading form.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Series title",
          "after": "Series title"
        }
      ]
    },
    {
      "id": "AACR2_HEADINGS_HANDSOFF_001",
      "tag_pattern": "^(1\\d\\d|6\\d\\d|7\\d\\d|8\\d\\d)$",
      "subfield_pattern": "^[a-z0-9]$",
      "severity": "INFO",
      "rationale": "MARC heading/access-point fields are handled as controlled headings; do not auto-append terminal punctuation.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Heading/access-point field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "Fitzgerald, F. Scott",
          "after": "Fitzgerald, F. Scott"
        },
        {
          "before": "Women -- History -- 20th century",
          "after": "Women -- History -- 20th century"
        }
      ]
    },
    {
      "id": "AACR2_PHYSICAL_340_HANDSOFF_001",
      "tag": "340",
      "subfield_pattern": "^[a-z0-9]$",
      "severity": "INFO",
      "rationale": "Physical medium details are highly format-specific; avoid automatic punctuation normalization.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Physical medium field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "paper",
          "after": "paper"
        }
      ]
    },
    {
      "id": "AACR2_ACCESS_856_HANDSOFF_001",
      "tag": "856",
      "subfield_pattern": "^[a-z0-9]$",
      "severity": "INFO",
      "rationale": "Electronic access fields often contain URLs/labels; avoid punctuation changes that may break access data.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Electronic access field; no automatic punctuation enforced."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "https://example.org/resource?id=1",
          "after": "https://example.org/resource?id=1"
        }
      ]
    },
    {
      "id": "AACR2_FALLBACK_001",
      "tag_pattern": "^[1-8][0-9][0-9]$",
      "subfield_pattern": "^[a-z0-9]$",
      "only_when_no_other_rule": true,
      "severity": "INFO",
      "rationale": "Fallback AACR2 punctuation guidance when no specific rule is defined.",
      "checks": [
        {
          "type": "punctuation",
          "suffix_mode": "when_last",
          "suffix_if_last": ".",
          "severity": "INFO",
          "message": "Consider terminal punctuation where AACR2 practice requires it."
        }
      ],
      "fixes": [
        {
          "label": "Apply fallback punctuation",
          "patch": [
            {
              "op": "replace_subfield",
              "value_template": "{{expected}}"
            }
          ]
        }
      ],
      "examples": [
        {
          "before": "Statement",
          "after": "Statement."
        }
      ]
    },
    {
      "id": "AACR2_NON_AACR2_336_001",
      "tag_pattern": "^(336|337|338)$",
      "severity": "INFO",
      "rationale": "Non-AACR2 elements are excluded from punctuation guidance.",
      "checks": [
        {
          "type": "fixed_field",
          "severity": "INFO",
          "message": "Non-AACR2 element; no punctuation applied."
        }
      ],
      "fixes": [],
      "examples": [
        {
          "before": "text",
          "after": "text"
        }
      ]
    }
  ]
}
